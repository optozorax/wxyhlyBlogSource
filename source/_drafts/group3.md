---
title: 群论系列(三)：交换子、共轭与魔方
tags:
  - 群论
  - 系列文章
  - 图形
  - 数学
  - 游戏
---
这篇文章我们来研究一下有趣的东西：解魔方。你可能会说魔方公式已经是烂大街的东西了，比谁还原得快都是在拼手法和记性（背公式），但我今天要说的是面对搜不到公式的“异形魔方”，我们该怎么还原的问题。如果那个魔方的所有操作能构成群的话，我们就能够通过一些简单的规则来自己设计魔方公式，自己设计的公式步数肯定不能保证是最佳的，但至少能还原。这里介绍两个用于设计魔方公式的工具：交换子（对易子）和共轭操作。本文参考了怎样用交换子设计魔方公式的[这个youtube视频](https://youtu.be/7LTCEyrQk44)。

下面我们以最普通的三阶魔方为例，教大家设计一个扭对角块的魔方公式。 
## 交换子
![我们将要设计的公式：它把体对角线上的两个角块分别在原地扭转了](/img/group3img01.png)
<!--more-->我们先简单认识一下三阶魔方的结构以及魔方公式的含义：三阶魔方共有6个面，有6个中心块、12个棱块与8个角块，其中每个面都可以绕着中心块旋转。将魔方的某个面面向自己，我们将面朝自己的那个面记为前面(F)，根据方向，其余六个面分别为后面(B)、顶面(U)、底面(D)、左面(L)、右面(R)。这样对于每个面的旋转都有相应的字母表示，我们规定将面X那一层顺时针旋转90度（注意是面朝面X的方向看过去的顺时针）记为X，逆时针旋转90度记为X'，旋转180度记为X2。有很多在线魔方网站可以帮你加深认识魔方公式，比如[这个网页3D魔方](http://www.rubik.com.cn/alg/)就很不错，本文所有魔方截图均来自于此网页。为了方便，**本文中所有魔方公式均选取前面(F)为红色、后面(B)为橙色、顶面(U)为黄色、底面(D)为白色、左面为蓝色(L)、右面(R)为绿色**，由于魔方中心块的位置永远不变，因此在打乱的情况下看中心块的颜色就能知道它对应哪个面。

首先我们观察到对六面已复原的魔方应用魔方公式A:"R U R' U' R U R' U'"后顶面与右面打乱了，底面的一个角原地翻转了。
![](/img/group3img01.gif)
魔方公式A的作用有两个：一是打乱了上层(U)与右层(R)，这是我们不想要的，二是原地翻转了一个角块（上图右图蓝色箭头），这是我们想要的。如何消掉第一种作用但还保留第二种作用呢？如果此时把公式A逆着做一遍，即A'= "U R U' R' U R U' R'"魔方就会还原，即第一种作用与第二种作用都被消掉了，这启发我们做完公式A后旋转一下底面D，然后再做A'，这样上面与右面被复原，原来底面原地翻转角的那个位置被一个新角块代替，也就是说A'没有将原来的红白绿角块转回去，而错把新位置上的红白蓝角块反向翻转（下图橙色箭头标出）！![](/img/group3img02.png)
最后我们把底面D转回去这样就设计出了把底面上的两个角块分别在原地扭转了魔方公式：A D A' D'，即R U R' U' R U R' U' D U R U' R' U R U' R' D'。设计这个公式的巧妙之处在于操作A影响的方块与操作D影响的方块的交集只有那一个角块。[点击这里查看3D魔方演示](http://www.rubik.com.cn/alg/?scheme=custom&alg=R_U_R-_U-_R_U_R-_U-_D_U_R_U-_R-_U_R_U-_R-_D-)

刚才我们设计的魔方公式就用到了交换子：给定两个操作（即两个“魔方公式”字符串）A（刚才例子中的A是"R U R' U' R U R' U'"）与B（刚才例子中的B是"D"），交换子是包含以下四个步骤的操作：
- 对魔方做操作A
- 对魔方做操作B
- 对魔方做逆操作A（把A倒过来做一遍），记做A'
- 对魔方做逆操作B（把B倒过来做一遍），记做B'

对应的魔方公式为操作从左到右写记为：A B A' B'，如果用群论的习惯记法则是操作从右到左写：$B^{-1}A^{-1}BA$。（为什么要叫交换子呢？因为如果操作顺序A、B可交换，即A B=B A，则A B A' B' = A A' B B' = e，即恒等变换。所以交换子其实代表了两个操作跟顺序有关的那部分，即不可交换的那部分）
## 共轭操作
我们成功旋转了两个角块，但它们却不在我们希望的体对角线的体对角线的位置上。解决方法很简单：转动左面180度（L2），下图中的角块2就会跑到角块3的位置上来，运用我们刚才得到的公式翻转完角块2与角块3后，再将左面转回去（L2'=L2）便得到最终的体对角线两角块（角块1与角块3）分别原地扭转的公式：L2 R U R' U' R U R' U' D U R U' R' U R U' R' D' L2。[点击这里查看3D魔方演示](http://www.rubik.com.cn/alg/?scheme=custom&alg=L2_R_U_R-_U-_R_U_R-_U-_D_U_R_U-_R-_U_R_U-_R-_D-_L2)
![](/img/group3img02.gif)
现在我们已经掌握了翻转任何两个角块的公式了——只要把要旋转的方块通过一些操作A放到2号与3号位置，然后使用刚才的公式（记为F），再撤销操作A（即A'），得到一个新公式A F A'。新公式A F A'与原来公式F相比有个共同点：它们都在原地翻转两个角块。一般地，对于操作A、B，我们定义一个等价关系：A ~ B 若存在操作C，使得B = C A C'，证明了自反性、对称性、传递性后，这种等价关系把所有对魔方的操作划分成了一个一个的等价类，我们叫共轭类。比如刚才所有的翻转两个魔方角块的操作构成一个共轭类。
## 双曲五魔方
好了，现在我们来试着玩一玩最异形的魔方——双曲五魔方——这个玩意儿只能在电脑上模拟，因为双曲空间无法直接嵌入进我们所在的欧氏空间。这是一个Java App，叫MagicTile，我好像找不到可用的原官方下载链接了，点这里从百度网盘下载。对于这个魔方我做了了视频讲解。


## 群共轭
魔方的所有操作构成群，叫魔方群。由于魔方操作的本质是旋转置换角块、棱块的位置，因此它是一个置换群。置换群即对称群$S_n$的子群，因为对称群是对n个对象做所有排列组合置换操作的集合，而置换群则是某些置换生成的群。比如你无法把魔方的单个棱翻转180度而不动其它方块，这个操作不属于魔方群（但你可以把魔方拆了再反装那个棱块）。我们之前看到同属于一个共轭类的两个操作是相似的，现在我们再来看看一般对称群$S_n$里面的共轭类到底有哪些。我们先从$S_2$看起：
- $S_2$只有两个元素： 12（恒等变换） 21（交换1和2）
我们很容易验证这两个操作自成一个共轭类（找不到操作a使得a 12 a'=21，将12与21都带进去试即可），即S_2共有两个共轭类。
- $S_3$有6个元素：123 231 312 213 132 321。
首先恒等变换自成一类，因为对任意操作a都有a 123 a' = a a' = 恒等变换，可以验证所有的对换（213、132、321）形成一个共轭类，所有的三轮换(231 312)形成一个共轭类。$S_3$有三个共轭类。

再继续往后列举$S_4$的共轭类之前我们先来想一想研究群的共轭类到底有啥作用。我们在《[群论系列(二)：数域的扩张](/archives/group1/)》中看到，研究$S_n$的正规子群对n次方程有没有解具有重大意义。其实利用共轭类是一个很好的构造正规子群的方法。我们知道正规子群除了满足子群的条件，还多了左右陪集相等的这个条件，即：设群$G$有子群$H$，任给一个群$G$的元素$g$，左右陪集$gH=Hg$，我们移项后可得$gHg^{-1}=H$，即正规子群中所有元素$h$在任意的共轭变换$ghg^{-1}$后仍然落在正规子群内，换句话说，正规子群必然包含一个完整的共轭类，包含完整共轭类的子群一定正规。这样我们就能够利用共轭类来“生成”正规子群了。
我们看到$S_3$有三个共轭类，但有个是恒等变换自成一类，只要是个子群就一定会包含这个共轭类。于是$S_3$的所有正规子群只有这些可能：
1. 包含所有共轭类
2. 包含所有的三轮换但不包含对换
3. 包含所有的对换但不包含三轮换

其中情形1.给出了群$S_3$自身，它当然是自己的（平凡）正规子群。情形2. 给出了交错群$A_3$，它是$S_3$的正规子群且同构于循环群$C_3$。第三种情况有点特别：对换213与对换132的复合是一个轮换231，所以有群乘法的封闭性得，最小的包含对换的正规子群一定包含三轮换，变成了情形1.，情形3.不可能。

现在再来看$S_4$。有了前面的经验，我们现在能够快速写出$S_4$的共轭类：
1. 恒等变换 1234
2. 对换 2134 3214 4231 1324 1432 1243
3. 三轮换 2314 3124 1342 1423 3241 4213 2431 4132
4. 四轮换 2341 4123 3421 4312 2413 3142
5. 不相交的对换 2143 4321 3412
之前我们分析了对换能够生成三轮换，所以不用单独考虑对换。注意两个四轮换可以生成一个三轮换（2341 2413 = 3124），而两个三轮换可以生成不相交的对换（2314 1342 =2143），因此我们只需考虑一下三种情况：
1. 只包含1.恒等变换与5.不相交的对换，可以验证